@page "/"
@inject NavigationManager NavManager
@using MiniRace.Helpers
@using MiniRace.Services
@using Microsoft.JSInterop
@using Microsoft.AspNetCore.Components.Web

@rendermode RenderMode.InteractiveServer


<div class="menu-container">
    <div class="title-section">
        <h1 class="game-title">MINI RACE</h1>
        <p class="subtitle">3D WEB BLAZOR EDITION</p>
    </div>

    <div class="menu-options">
        <button class="btn-menu" @onclick="NewGame">NEW GAME</button>
        <button class="btn-menu" @onclick="GoToOptions">OPTIONS</button>
        <button class="btn-menu" @onclick="ShowAbout">ABOUT</button>
        <button class="btn-menu" @onclick="ExitGame">EXIT</button>
    </div>

    @if (showAboutModal)
    {
        <div class="modal-backdrop">
            <div class="modal-content">
                <h2>About MiniRace</h2>
                <p>Created by Jacky the Code Bender.</p>
                <p>Powered by Blazor & Three.js.</p>
                <button class="btn-sm btn-primary" @onclick="() => showAboutModal = false">Close</button>
            </div>
        </div>
    }
</div>

<style>
    .menu-container {
        height: 100vh;
        width: 100vw;
        background: linear-gradient(135deg, #1e3c72 0%, #2a5298 100%);
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: center;
        color: white;
        font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    }

    .game-title {
        font-size: 5rem;
        font-weight: bold;
        text-shadow: 4px 4px 0px #000;
        margin-bottom: 0;
        animation: pulse 2s infinite;
    }

    .subtitle {
        font-size: 1.5rem;
        letter-spacing: 5px;
        margin-bottom: 3rem;
        color: #ffeb3b;
    }

    .menu-options {
        display: flex;
        flex-direction: column;
        gap: 1rem;
    }

    .btn-menu {
        padding: 15px 40px;
        font-size: 1.5rem;
        background: rgba(255, 255, 255, 0.1);
        border: 2px solid white;
        color: white;
        cursor: pointer;
        transition: all 0.3s;
        border-radius: 50px;
        text-transform: uppercase;
    }

    .btn-menu:hover {
        background: white;
        color: #1e3c72;
        transform: scale(1.1);
    }

    .modal-backdrop {
        position: fixed; top: 0; left: 0; width: 100%; height: 100%;
        background: rgba(0,0,0,0.8);
        display: flex; justify-content: center; align-items: center;
    }
    .modal-content {
        background: #333; padding: 2rem; border-radius: 10px; text-align: center;
        border: 2px solid #ffeb3b;
    }

    @@keyframes pulse {
        0% { transform: scale(1); }
        50% { transform: scale(1.05); }
        100% { transform: scale(1); }
    }
</style>

@code {
    private bool showAboutModal = false;

    private void NewGame()
    {
        NavManager.NavigateTo("/game");
    }

    private void GoToOptions()
    {
        NavManager.NavigateTo("/options");
    }

    private void ShowAbout()
    {
        showAboutModal = true;
    }

    private void ExitGame()
    {
        // Close window or navigate away
        // In browser, window.close() is restricted, so maybe just show a message
        NavManager.NavigateTo("about:blank");
    }
}
